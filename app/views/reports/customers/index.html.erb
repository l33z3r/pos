<% @nav_title = "Reports - Account Transactions" %>
<div id="reports_nav">


    <div class="report_tab" onclick="window.location = '/reports/sales'">
        Sales
    </div>
    <br>

    <div class="report_tab" onclick="window.location = '/reports/stocks'">
        Products
    </div>
    <br>

    <div class="report_tab" onclick="window.location = '/reports/payments'">
        Payments
    </div>
    <br>
    <div class="report_tab" onclick="window.location = '/reports/staff'">
        Staff
    </div>
    <br>
    <div class="report_tab selected" onclick="window.location = '/reports/customers'">
        Customers
    </div>
</div>
<div id="reports_container">
    <div>
        <div>
            <div class="container" id="#at_a_glance_section">
                <div id="report_sales_filters" class="popout_dialog">
                    <div id="refine_container">
                        <div id="date_select_container">
                            <div class="dropdown_container">
                                <div class="label">Report Type</div>
                                <select id="search_type_select" onchange="setCustomerSearchType($(this).val())">
                                    <option value="0">Customer Transactions</option>
                                </select>
                            </div>

                            <% currtime = Time.zone.now.beginning_of_day + 5.hours %>
                            <% lastyear = Time.zone.now - 1.year %>
                            <% yesterday = Time.zone.now - 1.day %>
                            <% lastweek = Time.zone.now - 7.days %>
                            <% lastmonth = Time.zone.now - 1.month %>
                            <div style="margin-left: 45px;" class="dropdown_container">
                                <div style="margin-left:30px;" class="label">Date</div>
                                <select id="date_preselect" onchange="setCustomerDateParams($(this).val(), true)" style="margin-left:30px; width: 120px">
                                    <option value="<%= (Time.zone.now.beginning_of_day + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (Time.zone.now.end_of_day + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>">Today</option>
                                    <option value="<%= (yesterday.beginning_of_day + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (yesterday.end_of_day + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>">Yesterday</option>
                                    <option value="<%= (Time.zone.now.beginning_of_week + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (Time.zone.now).strftime("%Y-%m-%d %H:%M:%S") %>">This Week</option>
                                    <option value="<%= (Time.zone.now.beginning_of_month + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (Time.zone.now).strftime("%Y-%m-%d %H:%M:%S") %>">This Month
                                    </option>
                                    <option value="<%= (Time.zone.now.beginning_of_year + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S")  %>,<%= (Time.zone.now).strftime("%Y-%m-%d %H:%M:%S") %>">This Year to Date
                                    </option>
                                    <option value="<%= (lastweek.beginning_of_week + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (lastweek.end_of_week + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>">Last
                                        Week
                                    </option>
                                    <option selected="yes" value="<%= (Time.zone.now - 30.days).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (Time.zone.now).strftime("%Y-%m-%d %H:%M:%S") %>">Last 30
                                        Days
                                    </option>
                                    <option value="<%= (lastmonth.beginning_of_month + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (lastmonth.end_of_month + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>">Last
                                        Month
                                    </option>
                                    <option value="<%= (lastyear.beginning_of_day + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (lastyear.end_of_day + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>">This Day
                                        Last Year
                                    </option>
                                    <option value="<%= (Time.zone.now.beginning_of_year - 2.years + @opening_time.hours).strftime("%Y-%m-%d %H:%M:%S") %>,<%= (Time.zone.now).strftime("%Y-%m-%d %H:%M:%S") %>">All Time</option>
                                    <option value=""></option>
                                </select>
                            </div>
                            <div id="days">
                                <div style="margin-left: 45px;" class="dropdown_container">
                                    <div class="label">Date From</div>
                                    <div class="input_date">
                                        <input type="text" size="13" onchange="updateCustomerDateParams($(this).val(), 'from')" readonly="readonly" id="date_from" name="date_from"
                                               value="<%= @selected_from_date.to_date.strftime("%Y-%m-%d %H:%M") %>"/>
                                    </div>
                                </div>
                                <div class="dropdown_container" style="margin-left: 65px;">
                                    <div class="label">Date To</div>
                                    <div class="input_date">
                                        <input type="text" size="13" onchange="updateCustomerDateParams($(this).val(), 'to')" readonly="readonly" id="date_to" name="date_to"
                                               value="<%= @selected_to_date.to_date.strftime("%Y-%m-%d %H:%M") %>"/>
                                    </div>
                                </div>
                            </div>
                            <div class="clear">&nbsp;</div>
                        </div>
                        <div id="date_select_container">

                            <%= render 'employee_dropdown' %>

                            <div class="clear">&nbsp;</div>
                        </div>
                    </div>
                    <div id="refine_button" style="margin-left: 140px;">
                        <div onclick="setCustomerReportParams();runCustomerSearch()" class="button">Update</div>
                    </div>



                </div>

                <div id="report_customer_results">
                    <%= render 'customer_tab' %>
                </div>


            </div>


        </div>
    </div>

</div>